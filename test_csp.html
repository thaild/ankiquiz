<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CSP Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <h1>Content Security Policy Test</h1>
    
    <div id="results"></div>
    
    <h2>Testing External Resources</h2>
    
    <!-- Test jQuery -->
    <div class="test-result" id="jquery-test">
        <strong>jQuery Test:</strong> Loading...
    </div>
    
    <!-- Test Bootstrap -->
    <div class="test-result" id="bootstrap-test">
        <strong>Bootstrap Test:</strong> Loading...
    </div>
    
    <!-- Test Font Awesome -->
    <div class="test-result" id="fontawesome-test">
        <strong>Font Awesome Test:</strong> Loading...
    </div>
    
    <!-- Test Google Fonts -->
    <div class="test-result" id="googlefonts-test">
        <strong>Google Fonts Test:</strong> Loading...
    </div>
    
    <script>
        // Test jQuery
        const jqueryScript = document.createElement('script');
        jqueryScript.src = 'https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js';
        jqueryScript.integrity = 'sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=';
        jqueryScript.crossOrigin = 'anonymous';
        jqueryScript.onload = () => {
            document.getElementById('jquery-test').innerHTML = '<strong>jQuery Test:</strong> ✅ Successfully loaded';
            document.getElementById('jquery-test').className = 'test-result success';
        };
        jqueryScript.onerror = () => {
            document.getElementById('jquery-test').innerHTML = '<strong>jQuery Test:</strong> ❌ Failed to load';
            document.getElementById('jquery-test').className = 'test-result error';
        };
        document.head.appendChild(jqueryScript);
        
        // Test Bootstrap
        const bootstrapScript = document.createElement('script');
        bootstrapScript.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js';
        bootstrapScript.integrity = 'sha256-Bh8LHqeebiyiT0YD5V0+kJ90cboLJ5zbbepAVUEGxqI=';
        bootstrapScript.crossOrigin = 'anonymous';
        bootstrapScript.onload = () => {
            document.getElementById('bootstrap-test').innerHTML = '<strong>Bootstrap Test:</strong> ✅ Successfully loaded';
            document.getElementById('bootstrap-test').className = 'test-result success';
        };
        bootstrapScript.onerror = () => {
            document.getElementById('bootstrap-test').innerHTML = '<strong>Bootstrap Test:</strong> ❌ Failed to load';
            document.getElementById('bootstrap-test').className = 'test-result error';
        };
        document.head.appendChild(bootstrapScript);
        
        // Test Font Awesome CSS
        const fontawesomeLink = document.createElement('link');
        fontawesomeLink.rel = 'stylesheet';
        fontawesomeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css';
        fontawesomeLink.onload = () => {
            document.getElementById('fontawesome-test').innerHTML = '<strong>Font Awesome Test:</strong> ✅ Successfully loaded';
            document.getElementById('fontawesome-test').className = 'test-result success';
        };
        fontawesomeLink.onerror = () => {
            document.getElementById('fontawesome-test').innerHTML = '<strong>Font Awesome Test:</strong> ❌ Failed to load';
            document.getElementById('fontawesome-test').className = 'test-result error';
        };
        document.head.appendChild(fontawesomeLink);
        
        // Test Google Fonts
        const googleFontsLink = document.createElement('link');
        googleFontsLink.rel = 'stylesheet';
        googleFontsLink.href = 'https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap';
        googleFontsLink.onload = () => {
            document.getElementById('googlefonts-test').innerHTML = '<strong>Google Fonts Test:</strong> ✅ Successfully loaded';
            document.getElementById('googlefonts-test').className = 'test-result success';
        };
        googleFontsLink.onerror = () => {
            document.getElementById('googlefonts-test').innerHTML = '<strong>Google Fonts Test:</strong> ❌ Failed to load';
            document.getElementById('googlefonts-test').className = 'test-result error';
        };
        document.head.appendChild(googleFontsLink);
        
        // Check for CSP violations
        document.addEventListener('securitypolicyviolation', function(e) {
            const violationDiv = document.createElement('div');
            violationDiv.className = 'test-result error';
            violationDiv.innerHTML = `<strong>CSP Violation:</strong> ${e.violatedDirective} - ${e.blockedURI}`;
            document.getElementById('results').appendChild(violationDiv);
        });
        
        // Check console for errors
        const originalError = console.error;
        console.error = function(...args) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'test-result warning';
            errorDiv.innerHTML = `<strong>Console Error:</strong> ${args.join(' ')}`;
            document.getElementById('results').appendChild(errorDiv);
            originalError.apply(console, args);
        };
    </script>
</body>
</html> 